# Editor and pager
export EDITOR=nvim
export PAGER="bat"
export MANPAGER="sh -c 'col -bx | bat -l man -p'"

export XDG_CONFIG_HOME="$HOME/.config"

# Homebrew environment hints
export HOMEBREW_NO_ENV_HINTS=1
export DEVBOX_NO_PROMPT=1

{{- if not .oppreferred }}

# Set SSH Agent (Secretive)
export SSH_AUTH_SOCK=/Users/joel/Library/Containers/com.maxgoedjen.Secretive.SecretAgent/Data/socket.ssh
{{- end }}

# UI & color settings
export CLICOLOR=1
export LS_COLORS='di=1;34:ln=1;35:so=1;32:pi=1;33:ex=1;31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43'

# Language-specific paths
export GOPATH="$HOME/.local/share/go"
export GOBIN="$HOME/.local/bin"

# PATH construction - building from scratch in exact priority order
# Priority (highest to lowest):
# 1. Nix
# 2. ASDF
# 3. Homebrew (bin + sbin)
# 4. System paths
# 5. LM Studio
# 6. User local bin
# 7. /usr/local/bin

# Start with empty PATH
PATH=""

# 1. Nix (highest priority)
# Include both system-wide Nix and user profile
if [[ -d "$HOME/.nix-profile/bin" ]]; then
  PATH="$HOME/.nix-profile/bin"
fi
if [[ -d /nix/var/nix/profiles/default/bin ]]; then
  PATH="${PATH:+$PATH:}/nix/var/nix/profiles/default/bin"
fi

# 2. ASDF shims
if [[ -d "${ASDF_DATA_DIR:-$HOME/.asdf}/shims" ]]; then
  PATH="${PATH:+$PATH:}${ASDF_DATA_DIR:-$HOME/.asdf}/shims"
fi

# 3. Homebrew bin and sbin
if [[ -d "$HOMEBREW_PREFIX/bin" ]]; then
  PATH="${PATH:+$PATH:}$HOMEBREW_PREFIX/bin"
fi
if [[ -d "$HOMEBREW_PREFIX/sbin" ]]; then
  PATH="${PATH:+$PATH:}$HOMEBREW_PREFIX/sbin"
fi

# 4. System paths
PATH="${PATH:+$PATH:}/usr/bin:/bin:/usr/sbin:/sbin"

# 5. LM Studio
if [[ -d "$HOME/.lmstudio/bin" ]]; then
  PATH="${PATH:+$PATH:}$HOME/.lmstudio/bin"
fi

# 6. User local bin
if [[ -d "$HOME/.local/bin" ]]; then
  PATH="${PATH:+$PATH:}$HOME/.local/bin"
fi

# 7. /usr/local/bin (lowest priority)
if [[ -d /usr/local/bin ]]; then
  PATH="${PATH:+$PATH:}/usr/local/bin"
fi

export PATH
